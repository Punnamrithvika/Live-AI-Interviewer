{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useLocation,useNavigate}from'react-router-dom';import{Mic,Video,Check,AlertCircle,ArrowLeft}from'lucide-react';import{startInterview}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PreInterviewCheck=()=>{var _location$state;const location=useLocation();const navigate=useNavigate();const formData=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.formData;// State Management\nconst[cameraStream,setCameraStream]=useState(null);const[micStream,setMicStream]=useState(null);const[isRecording,setIsRecording]=useState(false);const[recordedAudio,setRecordedAudio]=useState(null);const[audioLevel,setAudioLevel]=useState(0);const[errors,setErrors]=useState({});const[isStartingInterview,setIsStartingInterview]=useState(false);// Refs\nconst videoRef=useRef(null);const mediaRecorderRef=useRef(null);const audioContextRef=useRef(null);const analyserRef=useRef(null);const audioChunksRef=useRef([]);const animationFrameRef=useRef(null);// Redirect if no form data\nuseEffect(()=>{if(!formData){navigate('/');}},[formData,navigate]);// STEP 1: Request Camera & Microphone Access\nuseEffect(()=>{const requestDevices=async()=>{try{// Request camera\nconst videoStream=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480},audio:false});setCameraStream(videoStream);if(videoRef.current){videoRef.current.srcObject=videoStream;}// Request microphone with audio monitoring\nconst audioStream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:true,noiseSuppression:true,autoGainControl:true}});setMicStream(audioStream);// Setup audio level monitoring (VU meter)\nsetupAudioMonitoring(audioStream);}catch(err){setErrors({devices:'Camera or microphone access denied. Please allow access and refresh.'});}};requestDevices();// Cleanup on unmount\nreturn()=>{if(cameraStream){cameraStream.getTracks().forEach(track=>track.stop());}if(micStream){micStream.getTracks().forEach(track=>track.stop());}if(animationFrameRef.current){cancelAnimationFrame(animationFrameRef.current);}if(audioContextRef.current){audioContextRef.current.close();}};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);// STEP 2: Audio Level Monitoring (VU Meter)\nconst setupAudioMonitoring=stream=>{const audioContext=new(window.AudioContext||window.webkitAudioContext)();const analyser=audioContext.createAnalyser();const microphone=audioContext.createMediaStreamSource(stream);analyser.fftSize=256;microphone.connect(analyser);audioContextRef.current=audioContext;analyserRef.current=analyser;// Monitor audio levels\nconst dataArray=new Uint8Array(analyser.frequencyBinCount);const updateLevel=()=>{analyser.getByteFrequencyData(dataArray);const average=dataArray.reduce((a,b)=>a+b)/dataArray.length;setAudioLevel(Math.min(100,average/255*100));animationFrameRef.current=requestAnimationFrame(updateLevel);};updateLevel();};// STEP 3: Start Test Recording\nconst startTestRecording=()=>{if(!micStream)return;audioChunksRef.current=[];const mediaRecorder=new MediaRecorder(micStream);mediaRecorder.ondataavailable=event=>{if(event.data.size>0){audioChunksRef.current.push(event.data);}};mediaRecorder.onstop=()=>{const audioBlob=new Blob(audioChunksRef.current,{type:'audio/webm'});const audioUrl=URL.createObjectURL(audioBlob);setRecordedAudio(audioUrl);};mediaRecorderRef.current=mediaRecorder;mediaRecorder.start();setIsRecording(true);};// STEP 4: Stop Test Recording\nconst stopTestRecording=()=>{if(mediaRecorderRef.current&&isRecording){mediaRecorderRef.current.stop();setIsRecording(false);}};// STEP 5: Confirm and Start Interview\nconst handleConfirmProceed=async()=>{if(!recordedAudio||!cameraStream||!micStream||!formData)return;setIsStartingInterview(true);setErrors({});try{var _formData$resumeData,_formData$resumeData$;// Build skill difficulties object\nconst skillDifficulties={};formData.skills.forEach(skill=>{skillDifficulties[skill.name]=skill.difficulty;});// Call backend to start interview\nconst response=await startInterview({candidate_name:formData.candidateName,job_title:formData.jobTitle,recruiter_skills:formData.skills.map(s=>s.name),target_skill_difficulties:skillDifficulties,resume_text:((_formData$resumeData=formData.resumeData)===null||_formData$resumeData===void 0?void 0:(_formData$resumeData$=_formData$resumeData.data)===null||_formData$resumeData$===void 0?void 0:_formData$resumeData$.raw_text)||null});if(response.success){var _response$question;// Extract first question\nconst questionText=typeof response.question==='string'?response.question:((_response$question=response.question)===null||_response$question===void 0?void 0:_response$question.question)||'Question not available';// Navigate to audio interview with streams and session\nnavigate(\"/audio-interview/\".concat(response.session_id),{state:{firstQuestion:questionText,cameraStream,micStream}});}}catch(err){setErrors({api:err.message||'Failed to start interview'});}finally{setIsStartingInterview(false);}};// Dummy question\nconst dummyQuestion=\"Please state your name and tell us one fun fact about yourself.\";if(!formData){return null;// Will redirect via useEffect\n}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-stone-50 p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/'),className:\"mb-6 flex items-center gap-2 text-slate-600 hover:text-slate-800 transition-colors\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"h-5 w-5\"}),\"Back to Setup\"]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-slate-800 mb-2\",children:\"Pre-Interview Hardware Check\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-600 mb-8\",children:\"Let's make sure your camera and microphone are working properly\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-stone-200 p-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-semibold mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Video,{className:\"h-5 w-5 text-blue-600\"}),\"Camera Check\"]}),/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,playsInline:true,muted:true,className:\"w-full h-64 bg-slate-900 rounded-lg object-cover\"}),cameraStream&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-green-600 mt-2 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4\"}),\" Camera connected successfully\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-stone-200 p-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-semibold mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Mic,{className:\"h-5 w-5 text-red-600\"}),\"Microphone Check\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-600 mb-2\",children:\"Speak to see audio levels:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-8 bg-stone-200 rounded-full overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full bg-gradient-to-r from-green-500 via-yellow-500 to-red-500 transition-all duration-100\",style:{width:\"\".concat(audioLevel,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs text-slate-500 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Silent\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Perfect\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Too Loud\"})]})]}),micStream&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-green-600 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4\"}),\" Microphone connected successfully\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-stone-200 p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Test Recording\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-amber-900 mb-2\",children:\"Practice Question:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-slate-800\",children:dummyQuestion})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mb-4\",children:[!isRecording&&!recordedAudio&&/*#__PURE__*/_jsxs(\"button\",{onClick:startTestRecording,disabled:!micStream,className:\"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",children:[/*#__PURE__*/_jsx(Mic,{className:\"h-5 w-5\"}),\"Start Test Recording\"]}),isRecording&&/*#__PURE__*/_jsxs(\"button\",{onClick:stopTestRecording,className:\"px-6 py-3 bg-slate-700 hover:bg-slate-800 text-white rounded-lg flex items-center gap-2 transition-colors\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-3 w-3 bg-red-500 rounded-full animate-pulse\"}),\"Stop Recording\"]})]}),recordedAudio&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-stone-50 rounded-lg p-4 border border-stone-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-slate-700 mb-3\",children:\"Listen to your recording:\"}),/*#__PURE__*/_jsx(\"audio\",{src:recordedAudio,controls:true,className:\"w-full mb-4\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setRecordedAudio(null);audioChunksRef.current=[];},className:\"text-sm text-blue-600 hover:text-blue-700 font-medium\",children:\"Record Again\"})]})]}),errors.devices&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-5 w-5 text-red-600\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-800\",children:errors.devices})]}),errors.api&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-5 w-5 text-red-600\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-800\",children:errors.api})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleConfirmProceed,disabled:!recordedAudio||!cameraStream||!micStream||isStartingInterview,className:\"w-full py-4 bg-green-600 hover:bg-green-700 text-white text-lg font-semibold rounded-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",children:[/*#__PURE__*/_jsx(Check,{className:\"h-6 w-6\"}),isStartingInterview?'Starting Interview...':'Everything sounds good! Proceed to Interview']})]})});};export default PreInterviewCheck;","map":{"version":3,"names":["React","useState","useEffect","useRef","useLocation","useNavigate","Mic","Video","Check","AlertCircle","ArrowLeft","startInterview","jsx","_jsx","jsxs","_jsxs","PreInterviewCheck","_location$state","location","navigate","formData","state","cameraStream","setCameraStream","micStream","setMicStream","isRecording","setIsRecording","recordedAudio","setRecordedAudio","audioLevel","setAudioLevel","errors","setErrors","isStartingInterview","setIsStartingInterview","videoRef","mediaRecorderRef","audioContextRef","analyserRef","audioChunksRef","animationFrameRef","requestDevices","videoStream","navigator","mediaDevices","getUserMedia","video","width","height","audio","current","srcObject","audioStream","echoCancellation","noiseSuppression","autoGainControl","setupAudioMonitoring","err","devices","getTracks","forEach","track","stop","cancelAnimationFrame","close","stream","audioContext","window","AudioContext","webkitAudioContext","analyser","createAnalyser","microphone","createMediaStreamSource","fftSize","connect","dataArray","Uint8Array","frequencyBinCount","updateLevel","getByteFrequencyData","average","reduce","a","b","length","Math","min","requestAnimationFrame","startTestRecording","mediaRecorder","MediaRecorder","ondataavailable","event","data","size","push","onstop","audioBlob","Blob","type","audioUrl","URL","createObjectURL","start","stopTestRecording","handleConfirmProceed","_formData$resumeData","_formData$resumeData$","skillDifficulties","skills","skill","name","difficulty","response","candidate_name","candidateName","job_title","jobTitle","recruiter_skills","map","s","target_skill_difficulties","resume_text","resumeData","raw_text","success","_response$question","questionText","question","concat","session_id","firstQuestion","api","message","dummyQuestion","className","children","onClick","ref","autoPlay","playsInline","muted","style","disabled","src","controls"],"sources":["/Users/pruthanj/d/frontend/src/components/PreInterviewCheck.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { Mic, Video, Check, AlertCircle, ArrowLeft } from 'lucide-react';\nimport { startInterview } from '../services/api';\n\nconst PreInterviewCheck = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const formData = location.state?.formData;\n\n  // State Management\n  const [cameraStream, setCameraStream] = useState(null);\n  const [micStream, setMicStream] = useState(null);\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordedAudio, setRecordedAudio] = useState(null);\n  const [audioLevel, setAudioLevel] = useState(0);\n  const [errors, setErrors] = useState({});\n  const [isStartingInterview, setIsStartingInterview] = useState(false);\n  \n  // Refs\n  const videoRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const audioContextRef = useRef(null);\n  const analyserRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const animationFrameRef = useRef(null);\n\n  // Redirect if no form data\n  useEffect(() => {\n    if (!formData) {\n      navigate('/');\n    }\n  }, [formData, navigate]);\n\n  // STEP 1: Request Camera & Microphone Access\n  useEffect(() => {\n    const requestDevices = async () => {\n      try {\n        // Request camera\n        const videoStream = await navigator.mediaDevices.getUserMedia({\n          video: { width: 640, height: 480 },\n          audio: false\n        });\n        setCameraStream(videoStream);\n        if (videoRef.current) {\n          videoRef.current.srcObject = videoStream;\n        }\n\n        // Request microphone with audio monitoring\n        const audioStream = await navigator.mediaDevices.getUserMedia({\n          audio: {\n            echoCancellation: true,\n            noiseSuppression: true,\n            autoGainControl: true\n          }\n        });\n        setMicStream(audioStream);\n        \n        // Setup audio level monitoring (VU meter)\n        setupAudioMonitoring(audioStream);\n        \n      } catch (err) {\n        setErrors({ \n          devices: 'Camera or microphone access denied. Please allow access and refresh.' \n        });\n      }\n    };\n\n    requestDevices();\n\n    // Cleanup on unmount\n    return () => {\n      if (cameraStream) {\n        cameraStream.getTracks().forEach(track => track.stop());\n      }\n      if (micStream) {\n        micStream.getTracks().forEach(track => track.stop());\n      }\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n      if (audioContextRef.current) {\n        audioContextRef.current.close();\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // STEP 2: Audio Level Monitoring (VU Meter)\n  const setupAudioMonitoring = (stream) => {\n    const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n    const analyser = audioContext.createAnalyser();\n    const microphone = audioContext.createMediaStreamSource(stream);\n    \n    analyser.fftSize = 256;\n    microphone.connect(analyser);\n    \n    audioContextRef.current = audioContext;\n    analyserRef.current = analyser;\n    \n    // Monitor audio levels\n    const dataArray = new Uint8Array(analyser.frequencyBinCount);\n    const updateLevel = () => {\n      analyser.getByteFrequencyData(dataArray);\n      const average = dataArray.reduce((a, b) => a + b) / dataArray.length;\n      setAudioLevel(Math.min(100, (average / 255) * 100));\n      animationFrameRef.current = requestAnimationFrame(updateLevel);\n    };\n    updateLevel();\n  };\n\n  // STEP 3: Start Test Recording\n  const startTestRecording = () => {\n    if (!micStream) return;\n    \n    audioChunksRef.current = [];\n    const mediaRecorder = new MediaRecorder(micStream);\n    \n    mediaRecorder.ondataavailable = (event) => {\n      if (event.data.size > 0) {\n        audioChunksRef.current.push(event.data);\n      }\n    };\n    \n    mediaRecorder.onstop = () => {\n      const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/webm' });\n      const audioUrl = URL.createObjectURL(audioBlob);\n      setRecordedAudio(audioUrl);\n    };\n    \n    mediaRecorderRef.current = mediaRecorder;\n    mediaRecorder.start();\n    setIsRecording(true);\n  };\n\n  // STEP 4: Stop Test Recording\n  const stopTestRecording = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      setIsRecording(false);\n    }\n  };\n\n  // STEP 5: Confirm and Start Interview\n  const handleConfirmProceed = async () => {\n    if (!recordedAudio || !cameraStream || !micStream || !formData) return;\n    \n    setIsStartingInterview(true);\n    setErrors({});\n    \n    try {\n      // Build skill difficulties object\n      const skillDifficulties = {};\n      formData.skills.forEach(skill => {\n        skillDifficulties[skill.name] = skill.difficulty;\n      });\n\n      // Call backend to start interview\n      const response = await startInterview({\n        candidate_name: formData.candidateName,\n        job_title: formData.jobTitle,\n        recruiter_skills: formData.skills.map(s => s.name),\n        target_skill_difficulties: skillDifficulties,\n        resume_text: formData.resumeData?.data?.raw_text || null,\n      });\n\n      if (response.success) {\n        // Extract first question\n        const questionText = typeof response.question === 'string' \n          ? response.question \n          : response.question?.question || 'Question not available';\n        \n        // Navigate to audio interview with streams and session\n        navigate(`/audio-interview/${response.session_id}`, {\n          state: { \n            firstQuestion: questionText,\n            cameraStream,\n            micStream\n          }\n        });\n      }\n    } catch (err) {\n      setErrors({ api: err.message || 'Failed to start interview' });\n    } finally {\n      setIsStartingInterview(false);\n    }\n  };\n\n  // Dummy question\n  const dummyQuestion = \"Please state your name and tell us one fun fact about yourself.\";\n\n  if (!formData) {\n    return null; // Will redirect via useEffect\n  }\n\n  return (\n    <div className=\"min-h-screen bg-stone-50 p-8\">\n      <div className=\"max-w-4xl mx-auto\">\n        {/* Back Button */}\n        <button\n          onClick={() => navigate('/')}\n          className=\"mb-6 flex items-center gap-2 text-slate-600 hover:text-slate-800 transition-colors\"\n        >\n          <ArrowLeft className=\"h-5 w-5\" />\n          Back to Setup\n        </button>\n\n        <h1 className=\"text-3xl font-bold text-slate-800 mb-2\">\n          Pre-Interview Hardware Check\n        </h1>\n        <p className=\"text-slate-600 mb-8\">\n          Let's make sure your camera and microphone are working properly\n        </p>\n        \n        {/* Camera Feed */}\n        <div className=\"bg-white rounded-xl shadow-sm border border-stone-200 p-6 mb-6\">\n          <h2 className=\"text-xl font-semibold mb-4 flex items-center gap-2\">\n            <Video className=\"h-5 w-5 text-blue-600\" />\n            Camera Check\n          </h2>\n          <video\n            ref={videoRef}\n            autoPlay\n            playsInline\n            muted\n            className=\"w-full h-64 bg-slate-900 rounded-lg object-cover\"\n          />\n          {cameraStream && (\n            <p className=\"text-green-600 mt-2 flex items-center gap-2\">\n              <Check className=\"h-4 w-4\" /> Camera connected successfully\n            </p>\n          )}\n        </div>\n\n        {/* Microphone Check with VU Meter */}\n        <div className=\"bg-white rounded-xl shadow-sm border border-stone-200 p-6 mb-6\">\n          <h2 className=\"text-xl font-semibold mb-4 flex items-center gap-2\">\n            <Mic className=\"h-5 w-5 text-red-600\" />\n            Microphone Check\n          </h2>\n          \n          {/* VU Meter */}\n          <div className=\"mb-4\">\n            <p className=\"text-sm text-slate-600 mb-2\">Speak to see audio levels:</p>\n            <div className=\"w-full h-8 bg-stone-200 rounded-full overflow-hidden\">\n              <div\n                className=\"h-full bg-gradient-to-r from-green-500 via-yellow-500 to-red-500 transition-all duration-100\"\n                style={{ width: `${audioLevel}%` }}\n              />\n            </div>\n            <div className=\"flex justify-between text-xs text-slate-500 mt-1\">\n              <span>Silent</span>\n              <span>Perfect</span>\n              <span>Too Loud</span>\n            </div>\n          </div>\n          \n          {micStream && (\n            <p className=\"text-green-600 flex items-center gap-2\">\n              <Check className=\"h-4 w-4\" /> Microphone connected successfully\n            </p>\n          )}\n        </div>\n\n        {/* Test Recording Section */}\n        <div className=\"bg-white rounded-xl shadow-sm border border-stone-200 p-6 mb-6\">\n          <h2 className=\"text-xl font-semibold mb-4\">Test Recording</h2>\n          \n          {/* Dummy Question */}\n          <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4\">\n            <p className=\"text-sm font-medium text-amber-900 mb-2\">Practice Question:</p>\n            <p className=\"text-lg text-slate-800\">{dummyQuestion}</p>\n          </div>\n\n          {/* Recording Controls */}\n          <div className=\"flex items-center gap-4 mb-4\">\n            {!isRecording && !recordedAudio && (\n              <button\n                onClick={startTestRecording}\n                disabled={!micStream}\n                className=\"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              >\n                <Mic className=\"h-5 w-5\" />\n                Start Test Recording\n              </button>\n            )}\n            \n            {isRecording && (\n              <button\n                onClick={stopTestRecording}\n                className=\"px-6 py-3 bg-slate-700 hover:bg-slate-800 text-white rounded-lg flex items-center gap-2 transition-colors\"\n              >\n                <div className=\"h-3 w-3 bg-red-500 rounded-full animate-pulse\" />\n                Stop Recording\n              </button>\n            )}\n          </div>\n\n          {/* Audio Playback */}\n          {recordedAudio && (\n            <div className=\"bg-stone-50 rounded-lg p-4 border border-stone-200\">\n              <p className=\"text-sm font-medium text-slate-700 mb-3\">Listen to your recording:</p>\n              <audio src={recordedAudio} controls className=\"w-full mb-4\" />\n              \n              <button\n                onClick={() => {\n                  setRecordedAudio(null);\n                  audioChunksRef.current = [];\n                }}\n                className=\"text-sm text-blue-600 hover:text-blue-700 font-medium\"\n              >\n                Record Again\n              </button>\n            </div>\n          )}\n        </div>\n\n        {/* Errors */}\n        {errors.devices && (\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center gap-2\">\n            <AlertCircle className=\"h-5 w-5 text-red-600\" />\n            <p className=\"text-red-800\">{errors.devices}</p>\n          </div>\n        )}\n        \n        {errors.api && (\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center gap-2\">\n            <AlertCircle className=\"h-5 w-5 text-red-600\" />\n            <p className=\"text-red-800\">{errors.api}</p>\n          </div>\n        )}\n\n        {/* Confirm and Proceed */}\n        <button\n          onClick={handleConfirmProceed}\n          disabled={!recordedAudio || !cameraStream || !micStream || isStartingInterview}\n          className=\"w-full py-4 bg-green-600 hover:bg-green-700 text-white text-lg font-semibold rounded-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n        >\n          <Check className=\"h-6 w-6\" />\n          {isStartingInterview ? 'Starting Interview...' : 'Everything sounds good! Proceed to Interview'}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default PreInterviewCheck;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}