{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rithv\\\\OneDrive\\\\Desktop\\\\mp_interviewer\\\\frontend\\\\src\\\\components\\\\CameraView.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Camera, CameraOff, Mic, MicOff } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CameraView = ({\n  onPermissionGranted,\n  onPermissionDenied\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  const [stream, setStream] = useState(null);\n  const [isAudioEnabled, setIsAudioEnabled] = useState(true);\n  const [isVideoEnabled, setIsVideoEnabled] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    requestMediaPermissions();\n    return () => {\n      // Cleanup: stop all tracks when component unmounts\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const requestMediaPermissions = async () => {\n    try {\n      const mediaStream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          width: {\n            ideal: 1280\n          },\n          height: {\n            ideal: 720\n          },\n          facingMode: 'user'\n        },\n        audio: true\n      });\n      setStream(mediaStream);\n      if (videoRef.current) {\n        videoRef.current.srcObject = mediaStream;\n      }\n      if (onPermissionGranted) {\n        onPermissionGranted(mediaStream);\n      }\n    } catch (err) {\n      console.error('Error accessing media devices:', err);\n      setError(err.message);\n      if (onPermissionDenied) {\n        onPermissionDenied(err);\n      }\n    }\n  };\n  const toggleAudio = () => {\n    if (stream) {\n      const audioTrack = stream.getAudioTracks()[0];\n      if (audioTrack) {\n        audioTrack.enabled = !audioTrack.enabled;\n        setIsAudioEnabled(audioTrack.enabled);\n      }\n    }\n  };\n  const toggleVideo = () => {\n    if (stream) {\n      const videoTrack = stream.getVideoTracks()[0];\n      if (videoTrack) {\n        videoTrack.enabled = !videoTrack.enabled;\n        setIsVideoEnabled(videoTrack.enabled);\n      }\n    }\n  };\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative w-full h-full bg-slate-800 rounded-lg overflow-hidden flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center text-slate-300 p-4\",\n        children: [/*#__PURE__*/_jsxDEV(CameraOff, {\n          className: \"w-12 h-12 mx-auto mb-2 opacity-50\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm\",\n          children: \"Camera access denied\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: requestMediaPermissions,\n          className: \"mt-2 text-xs text-amber-600 hover:text-amber-700 underline\",\n          children: \"Retry\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative w-full h-full bg-slate-900 rounded-lg overflow-hidden shadow-lg border border-slate-700\",\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      autoPlay: true,\n      playsInline: true,\n      muted: true,\n      className: \"w-full h-full object-cover\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-3 left-3 px-3 py-1 bg-emerald-600 text-white text-xs font-medium rounded-full flex items-center gap-1.5\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"w-2 h-2 bg-white rounded-full animate-pulse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), \"Interview in progress\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute bottom-3 right-3 flex gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: toggleAudio,\n        className: `p-2 rounded-full transition-colors ${isAudioEnabled ? 'bg-slate-700/80 hover:bg-slate-600 text-white' : 'bg-red-600 hover:bg-red-700 text-white'}`,\n        title: isAudioEnabled ? 'Mute' : 'Unmute',\n        children: isAudioEnabled ? /*#__PURE__*/_jsxDEV(Mic, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(MicOff, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 59\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: toggleVideo,\n        className: `p-2 rounded-full transition-colors ${isVideoEnabled ? 'bg-slate-700/80 hover:bg-slate-600 text-white' : 'bg-red-600 hover:bg-red-700 text-white'}`,\n        title: isVideoEnabled ? 'Turn off camera' : 'Turn on camera',\n        children: isVideoEnabled ? /*#__PURE__*/_jsxDEV(Camera, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(CameraOff, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 62\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n_s(CameraView, \"dGvOHLul2O0Xk95qR1goMqT7oCk=\");\n_c = CameraView;\nexport default CameraView;\nvar _c;\n$RefreshReg$(_c, \"CameraView\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Camera","CameraOff","Mic","MicOff","jsxDEV","_jsxDEV","CameraView","onPermissionGranted","onPermissionDenied","_s","videoRef","stream","setStream","isAudioEnabled","setIsAudioEnabled","isVideoEnabled","setIsVideoEnabled","error","setError","requestMediaPermissions","getTracks","forEach","track","stop","mediaStream","navigator","mediaDevices","getUserMedia","video","width","ideal","height","facingMode","audio","current","srcObject","err","console","message","toggleAudio","audioTrack","getAudioTracks","enabled","toggleVideo","videoTrack","getVideoTracks","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","autoPlay","playsInline","muted","title","_c","$RefreshReg$"],"sources":["C:/Users/rithv/OneDrive/Desktop/mp_interviewer/frontend/src/components/CameraView.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { Camera, CameraOff, Mic, MicOff } from 'lucide-react';\n\nconst CameraView = ({ onPermissionGranted, onPermissionDenied }) => {\n  const videoRef = useRef(null);\n  const [stream, setStream] = useState(null);\n  const [isAudioEnabled, setIsAudioEnabled] = useState(true);\n  const [isVideoEnabled, setIsVideoEnabled] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    requestMediaPermissions();\n    \n    return () => {\n      // Cleanup: stop all tracks when component unmounts\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const requestMediaPermissions = async () => {\n    try {\n      const mediaStream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          width: { ideal: 1280 },\n          height: { ideal: 720 },\n          facingMode: 'user'\n        },\n        audio: true\n      });\n      \n      setStream(mediaStream);\n      \n      if (videoRef.current) {\n        videoRef.current.srcObject = mediaStream;\n      }\n      \n      if (onPermissionGranted) {\n        onPermissionGranted(mediaStream);\n      }\n    } catch (err) {\n      console.error('Error accessing media devices:', err);\n      setError(err.message);\n      \n      if (onPermissionDenied) {\n        onPermissionDenied(err);\n      }\n    }\n  };\n\n  const toggleAudio = () => {\n    if (stream) {\n      const audioTrack = stream.getAudioTracks()[0];\n      if (audioTrack) {\n        audioTrack.enabled = !audioTrack.enabled;\n        setIsAudioEnabled(audioTrack.enabled);\n      }\n    }\n  };\n\n  const toggleVideo = () => {\n    if (stream) {\n      const videoTrack = stream.getVideoTracks()[0];\n      if (videoTrack) {\n        videoTrack.enabled = !videoTrack.enabled;\n        setIsVideoEnabled(videoTrack.enabled);\n      }\n    }\n  };\n\n  if (error) {\n    return (\n      <div className=\"relative w-full h-full bg-slate-800 rounded-lg overflow-hidden flex items-center justify-center\">\n        <div className=\"text-center text-slate-300 p-4\">\n          <CameraOff className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\n          <p className=\"text-sm\">Camera access denied</p>\n          <button \n            onClick={requestMediaPermissions}\n            className=\"mt-2 text-xs text-amber-600 hover:text-amber-700 underline\"\n          >\n            Retry\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"relative w-full h-full bg-slate-900 rounded-lg overflow-hidden shadow-lg border border-slate-700\">\n      <video\n        ref={videoRef}\n        autoPlay\n        playsInline\n        muted\n        className=\"w-full h-full object-cover\"\n      />\n      \n      {/* Status badge */}\n      <div className=\"absolute top-3 left-3 px-3 py-1 bg-emerald-600 text-white text-xs font-medium rounded-full flex items-center gap-1.5\">\n        <span className=\"w-2 h-2 bg-white rounded-full animate-pulse\"></span>\n        Interview in progress\n      </div>\n      \n      {/* Controls */}\n      <div className=\"absolute bottom-3 right-3 flex gap-2\">\n        <button\n          onClick={toggleAudio}\n          className={`p-2 rounded-full transition-colors ${\n            isAudioEnabled \n              ? 'bg-slate-700/80 hover:bg-slate-600 text-white' \n              : 'bg-red-600 hover:bg-red-700 text-white'\n          }`}\n          title={isAudioEnabled ? 'Mute' : 'Unmute'}\n        >\n          {isAudioEnabled ? <Mic className=\"w-4 h-4\" /> : <MicOff className=\"w-4 h-4\" />}\n        </button>\n        \n        <button\n          onClick={toggleVideo}\n          className={`p-2 rounded-full transition-colors ${\n            isVideoEnabled \n              ? 'bg-slate-700/80 hover:bg-slate-600 text-white' \n              : 'bg-red-600 hover:bg-red-700 text-white'\n          }`}\n          title={isVideoEnabled ? 'Turn off camera' : 'Turn on camera'}\n        >\n          {isVideoEnabled ? <Camera className=\"w-4 h-4\" /> : <CameraOff className=\"w-4 h-4\" />}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default CameraView;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}