{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useParams,useNavigate}from'react-router-dom';import{Volume2,Mic,Brain,Send,Clock,Home}from'lucide-react';import{sendMessage}from'../services/api';import useWebSocket from'../hooks/useWebSocket';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AudioInterviewPage=_ref=>{let{sessionId:propSessionId,firstQuestion}=_ref;const{sessionId:paramSessionId}=useParams();const sessionId=propSessionId||paramSessionId;const navigate=useNavigate();// State Management\nconst[currentQuestion,setCurrentQuestion]=useState(firstQuestion||'');const[isSpeaking,setIsSpeaking]=useState(false);const[thinkingTime,setThinkingTime]=useState(20);const[isThinking,setIsThinking]=useState(false);const[isRecording,setIsRecording]=useState(false);const[questionNumber,setQuestionNumber]=useState(1);const[cameraStream,setCameraStream]=useState(null);const[micStream,setMicStream]=useState(null);const[audioLevel,setAudioLevel]=useState(0);// Refs\nconst mediaRecorderRef=useRef(null);const audioChunksRef=useRef([]);const timerIntervalRef=useRef(null);const utteranceRef=useRef(null);const videoRef=useRef(null);const audioContextRef=useRef(null);const analyserRef=useRef(null);const animationFrameRef=useRef(null);// WebSocket connection\nconst{isConnected,messages:wsMessages,sendAnswer}=useWebSocket(sessionId);// Initialize camera and mic\nuseEffect(()=>{const initDevices=async()=>{try{const videoStream=await navigator.mediaDevices.getUserMedia({video:{width:320,height:240},audio:false});setCameraStream(videoStream);const audioStream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:true,noiseSuppression:true,autoGainControl:true}});setMicStream(audioStream);// Setup audio monitoring\nsetupAudioMonitoring(audioStream);}catch(err){console.error('Error accessing devices:',err);}};initDevices();return()=>{if(cameraStream){cameraStream.getTracks().forEach(track=>track.stop());}if(micStream){micStream.getTracks().forEach(track=>track.stop());}if(audioContextRef.current){audioContextRef.current.close();}if(animationFrameRef.current){cancelAnimationFrame(animationFrameRef.current);}};},[]);// Setup audio level monitoring\nconst setupAudioMonitoring=stream=>{const audioContext=new(window.AudioContext||window.webkitAudioContext)();const analyser=audioContext.createAnalyser();const microphone=audioContext.createMediaStreamSource(stream);analyser.fftSize=256;microphone.connect(analyser);audioContextRef.current=audioContext;analyserRef.current=analyser;const dataArray=new Uint8Array(analyser.frequencyBinCount);const updateLevel=()=>{if(isRecording){analyser.getByteFrequencyData(dataArray);const average=dataArray.reduce((a,b)=>a+b)/dataArray.length;setAudioLevel(Math.min(100,average/255*100));}animationFrameRef.current=requestAnimationFrame(updateLevel);};updateLevel();};// Handle WebSocket messages for new questions\nuseEffect(()=>{if(wsMessages.length>0){const lastMessage=wsMessages[wsMessages.length-1];if(lastMessage.type==='question'){const questionData=lastMessage.data;if(questionData&&questionData.question){const newQuestion=questionData.question;setCurrentQuestion(newQuestion);setQuestionNumber(prev=>prev+1);// Speak the new question\nspeakQuestion(newQuestion);}else if(questionData===null){// Interview completed\nnavigate(\"/results/\".concat(sessionId));}}}},[wsMessages,sessionId,navigate]);// STEP 1: Initialize with first question\nuseEffect(()=>{if(currentQuestion&&questionNumber===1){speakQuestion(currentQuestion);}},[currentQuestion]);// STEP 2: Text-to-Speech Function\nconst speakQuestion=text=>{if('speechSynthesis'in window){// Cancel any ongoing speech\nwindow.speechSynthesis.cancel();const utterance=new SpeechSynthesisUtterance(text);utterance.rate=0.9;utterance.pitch=1.0;utterance.volume=1.0;// Wait for voices to load\nconst setVoice=()=>{const voices=window.speechSynthesis.getVoices();const preferredVoice=voices.find(v=>v.lang.startsWith('en')&&(v.name.includes('Female')||v.name.includes('Samantha')))||voices[0];if(preferredVoice){utterance.voice=preferredVoice;}};if(window.speechSynthesis.getVoices().length>0){setVoice();}else{window.speechSynthesis.onvoiceschanged=setVoice;}utterance.onstart=()=>{setIsSpeaking(true);};// STEP 3: When TTS finishes, start thinking timer\nutterance.onend=()=>{setIsSpeaking(false);startThinkingTimer();};utterance.onerror=e=>{console.error('Speech error:',e);setIsSpeaking(false);startThinkingTimer();};utteranceRef.current=utterance;window.speechSynthesis.speak(utterance);}else{// Browser doesn't support TTS - skip to thinking\nconsole.warn('Speech synthesis not supported');startThinkingTimer();}};// STEP 3: 20-Second Thinking Timer\nconst startThinkingTimer=()=>{setIsThinking(true);setThinkingTime(20);timerIntervalRef.current=setInterval(()=>{setThinkingTime(prev=>{if(prev<=1){clearInterval(timerIntervalRef.current);// STEP 4: Auto-start recording when timer reaches 0\nstartRecording();return 0;}return prev-1;});},1000);};// STEP 4: Automatically Start Audio Recording\nconst startRecording=()=>{setIsThinking(false);setIsRecording(true);setAudioLevel(0);if(!micStream){console.error('No microphone stream available');return;}audioChunksRef.current=[];try{const mediaRecorder=new MediaRecorder(micStream,{mimeType:'audio/webm'});mediaRecorder.ondataavailable=event=>{if(event.data.size>0){audioChunksRef.current.push(event.data);}};mediaRecorder.onstop=async()=>{const audioBlob=new Blob(audioChunksRef.current,{type:'audio/webm'});await submitAnswer(audioBlob);};mediaRecorderRef.current=mediaRecorder;mediaRecorder.start(100);}catch(err){console.error('Error starting recording:',err);setIsRecording(false);}};// STEP 5: Submit Answer (Stop Recording)\nconst handleSubmitAnswer=()=>{if(mediaRecorderRef.current&&isRecording){mediaRecorderRef.current.stop();setIsRecording(false);setAudioLevel(0);}};// Submit audio to backend (transcribe with Whisper)\nconst submitAnswer=async audioBlob=>{try{// For now, use a placeholder text since we need Whisper integration\n// In production, you'd send the audio to backend for transcription\n// Convert blob to base64 for demonstration\nconst reader=new FileReader();reader.readAsDataURL(audioBlob);reader.onloadend=async()=>{const base64Audio=reader.result;// TODO: Send to backend for Whisper transcription\n// For now, send a placeholder\nconst placeholderText=\"[Audio answer recorded - \".concat(audioBlob.size,\" bytes]\");try{if(isConnected){sendAnswer(placeholderText);}else{await sendMessage(sessionId,placeholderText);}}catch(err){console.error('Error submitting answer:',err);}};}catch(err){console.error('Error processing audio:',err);}};// Cleanup\nuseEffect(()=>{return()=>{if(timerIntervalRef.current){clearInterval(timerIntervalRef.current);}if(utteranceRef.current){window.speechSynthesis.cancel();}};},[]);// Format timer display\nconst formatTime=seconds=>{return\"00:\".concat(seconds.toString().padStart(2,'0'));};return/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen flex flex-col bg-stone-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-amber-50 border-b border-amber-200 px-6 py-4 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-slate-800\",children:\"AI Audio Interview\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-600\",children:\"Listen carefully and answer after the timer\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-600\",children:\"Question\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-slate-800\",children:questionNumber})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/'),className:\"px-4 py-2 bg-slate-700 hover:bg-slate-800 text-white rounded-lg flex items-center gap-2 transition-colors\",children:[/*#__PURE__*/_jsx(Home,{className:\"h-4 w-4\"}),\"Exit\"]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex items-center justify-center p-8 overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg border-2 border-stone-200 p-8 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[isSpeaking&&/*#__PURE__*/_jsx(Volume2,{className:\"h-6 w-6 text-blue-600 animate-pulse\"}),/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-slate-800\",children:[\"Question \",questionNumber]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl text-slate-700 leading-relaxed mb-4\",children:currentQuestion||'Loading question...'}),isSpeaking&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-blue-600 bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(Volume2,{className:\"h-5 w-5 animate-pulse\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Reading question aloud...\"})]})]}),isThinking&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-amber-50 border-2 border-amber-300 rounded-xl p-8 mb-8 text-center animate-fade-in\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-3 mb-4\",children:[/*#__PURE__*/_jsx(Brain,{className:\"h-8 w-8 text-amber-700\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-semibold text-amber-900\",children:\"Time to Think\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-7xl font-bold text-amber-700 mb-3 tabular-nums\",children:formatTime(thinkingTime)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-amber-800 mb-4\",children:\"Prepare your answer. Recording will start automatically.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-4 bg-amber-200 rounded-full overflow-hidden shadow-inner\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full bg-gradient-to-r from-amber-600 to-amber-500 transition-all duration-1000 ease-linear\",style:{width:\"\".concat(thinkingTime/20*100,\"%\")}})})]}),isRecording&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border-2 border-red-300 rounded-xl p-8 text-center animate-fade-in\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-3 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-6 w-6 bg-red-600 rounded-full animate-pulse\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 h-6 w-6 bg-red-600 rounded-full animate-ping opacity-75\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-semibold text-red-900\",children:\"Recording Your Answer\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-6 bg-red-200 rounded-full overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full bg-gradient-to-r from-red-500 to-red-600 transition-all duration-100\",style:{width:\"\".concat(audioLevel,\"%\")}})}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-red-700 mt-1\",children:[\"Audio Level: \",Math.round(audioLevel),\"%\"]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-red-800 mb-6\",children:\"Speak clearly into your microphone. Click \\\"Submit Answer\\\" when you're done.\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSubmitAnswer,className:\"px-8 py-4 bg-slate-700 hover:bg-slate-800 text-white text-lg font-semibold rounded-lg flex items-center gap-3 mx-auto transition-all hover:scale-105 shadow-lg\",children:[/*#__PURE__*/_jsx(Send,{className:\"h-6 w-6\"}),\"Submit Answer\"]})]}),!isSpeaking&&!isThinking&&!isRecording&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border-2 border-blue-200 rounded-xl p-8 text-center\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-12 w-12 text-blue-600 mx-auto mb-4 animate-pulse\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-blue-800\",children:\"Please wait while the question is being read...\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"fixed bottom-6 right-6 w-48 h-36 bg-slate-900 rounded-lg overflow-hidden shadow-2xl border-2 border-amber-300\",children:[/*#__PURE__*/_jsx(\"video\",{ref:el=>{if(el&&cameraStream){el.srcObject=cameraStream;}},autoPlay:true,playsInline:true,muted:true,className:\"w-full h-full object-cover\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 left-2 px-2 py-1 bg-black/50 rounded text-white text-xs\",children:\"You\"})]})]});};export default AudioInterviewPage;","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","Volume2","Mic","Brain","Send","Clock","Home","sendMessage","useWebSocket","jsx","_jsx","jsxs","_jsxs","AudioInterviewPage","_ref","sessionId","propSessionId","firstQuestion","paramSessionId","navigate","currentQuestion","setCurrentQuestion","isSpeaking","setIsSpeaking","thinkingTime","setThinkingTime","isThinking","setIsThinking","isRecording","setIsRecording","questionNumber","setQuestionNumber","cameraStream","setCameraStream","micStream","setMicStream","audioLevel","setAudioLevel","mediaRecorderRef","audioChunksRef","timerIntervalRef","utteranceRef","videoRef","audioContextRef","analyserRef","animationFrameRef","isConnected","messages","wsMessages","sendAnswer","initDevices","videoStream","navigator","mediaDevices","getUserMedia","video","width","height","audio","audioStream","echoCancellation","noiseSuppression","autoGainControl","setupAudioMonitoring","err","console","error","getTracks","forEach","track","stop","current","close","cancelAnimationFrame","stream","audioContext","window","AudioContext","webkitAudioContext","analyser","createAnalyser","microphone","createMediaStreamSource","fftSize","connect","dataArray","Uint8Array","frequencyBinCount","updateLevel","getByteFrequencyData","average","reduce","a","b","length","Math","min","requestAnimationFrame","lastMessage","type","questionData","data","question","newQuestion","prev","speakQuestion","concat","text","speechSynthesis","cancel","utterance","SpeechSynthesisUtterance","rate","pitch","volume","setVoice","voices","getVoices","preferredVoice","find","v","lang","startsWith","name","includes","voice","onvoiceschanged","onstart","onend","startThinkingTimer","onerror","e","speak","warn","setInterval","clearInterval","startRecording","mediaRecorder","MediaRecorder","mimeType","ondataavailable","event","size","push","onstop","audioBlob","Blob","submitAnswer","start","handleSubmitAnswer","reader","FileReader","readAsDataURL","onloadend","base64Audio","result","placeholderText","formatTime","seconds","toString","padStart","className","children","onClick","style","round","ref","el","srcObject","autoPlay","playsInline","muted"],"sources":["C:/Users/rithv/OneDrive/Desktop/mp_interviewer/frontend/src/components/AudioInterviewPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Volume2, Mic, Brain, Send, Clock, Home } from 'lucide-react';\nimport { sendMessage } from '../services/api';\nimport useWebSocket from '../hooks/useWebSocket';\n\nconst AudioInterviewPage = ({ sessionId: propSessionId, firstQuestion }) => {\n  const { sessionId: paramSessionId } = useParams();\n  const sessionId = propSessionId || paramSessionId;\n  const navigate = useNavigate();\n  \n  // State Management\n  const [currentQuestion, setCurrentQuestion] = useState(firstQuestion || '');\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [thinkingTime, setThinkingTime] = useState(20);\n  const [isThinking, setIsThinking] = useState(false);\n  const [isRecording, setIsRecording] = useState(false);\n  const [questionNumber, setQuestionNumber] = useState(1);\n  const [cameraStream, setCameraStream] = useState(null);\n  const [micStream, setMicStream] = useState(null);\n  const [audioLevel, setAudioLevel] = useState(0);\n  \n  // Refs\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const timerIntervalRef = useRef(null);\n  const utteranceRef = useRef(null);\n  const videoRef = useRef(null);\n  const audioContextRef = useRef(null);\n  const analyserRef = useRef(null);\n  const animationFrameRef = useRef(null);\n  \n  // WebSocket connection\n  const { isConnected, messages: wsMessages, sendAnswer } = useWebSocket(sessionId);\n\n  // Initialize camera and mic\n  useEffect(() => {\n    const initDevices = async () => {\n      try {\n        const videoStream = await navigator.mediaDevices.getUserMedia({\n          video: { width: 320, height: 240 },\n          audio: false\n        });\n        setCameraStream(videoStream);\n\n        const audioStream = await navigator.mediaDevices.getUserMedia({\n          audio: {\n            echoCancellation: true,\n            noiseSuppression: true,\n            autoGainControl: true\n          }\n        });\n        setMicStream(audioStream);\n        \n        // Setup audio monitoring\n        setupAudioMonitoring(audioStream);\n      } catch (err) {\n        console.error('Error accessing devices:', err);\n      }\n    };\n\n    initDevices();\n\n    return () => {\n      if (cameraStream) {\n        cameraStream.getTracks().forEach(track => track.stop());\n      }\n      if (micStream) {\n        micStream.getTracks().forEach(track => track.stop());\n      }\n      if (audioContextRef.current) {\n        audioContextRef.current.close();\n      }\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, []);\n\n  // Setup audio level monitoring\n  const setupAudioMonitoring = (stream) => {\n    const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n    const analyser = audioContext.createAnalyser();\n    const microphone = audioContext.createMediaStreamSource(stream);\n    \n    analyser.fftSize = 256;\n    microphone.connect(analyser);\n    \n    audioContextRef.current = audioContext;\n    analyserRef.current = analyser;\n    \n    const dataArray = new Uint8Array(analyser.frequencyBinCount);\n    const updateLevel = () => {\n      if (isRecording) {\n        analyser.getByteFrequencyData(dataArray);\n        const average = dataArray.reduce((a, b) => a + b) / dataArray.length;\n        setAudioLevel(Math.min(100, (average / 255) * 100));\n      }\n      animationFrameRef.current = requestAnimationFrame(updateLevel);\n    };\n    updateLevel();\n  };\n\n  // Handle WebSocket messages for new questions\n  useEffect(() => {\n    if (wsMessages.length > 0) {\n      const lastMessage = wsMessages[wsMessages.length - 1];\n      \n      if (lastMessage.type === 'question') {\n        const questionData = lastMessage.data;\n        if (questionData && questionData.question) {\n          const newQuestion = questionData.question;\n          setCurrentQuestion(newQuestion);\n          setQuestionNumber(prev => prev + 1);\n          \n          // Speak the new question\n          speakQuestion(newQuestion);\n        } else if (questionData === null) {\n          // Interview completed\n          navigate(`/results/${sessionId}`);\n        }\n      }\n    }\n  }, [wsMessages, sessionId, navigate]);\n\n  // STEP 1: Initialize with first question\n  useEffect(() => {\n    if (currentQuestion && questionNumber === 1) {\n      speakQuestion(currentQuestion);\n    }\n  }, [currentQuestion]);\n\n  // STEP 2: Text-to-Speech Function\n  const speakQuestion = (text) => {\n    if ('speechSynthesis' in window) {\n      // Cancel any ongoing speech\n      window.speechSynthesis.cancel();\n      \n      const utterance = new SpeechSynthesisUtterance(text);\n      utterance.rate = 0.9;\n      utterance.pitch = 1.0;\n      utterance.volume = 1.0;\n      \n      // Wait for voices to load\n      const setVoice = () => {\n        const voices = window.speechSynthesis.getVoices();\n        const preferredVoice = voices.find(v => \n          v.lang.startsWith('en') && (v.name.includes('Female') || v.name.includes('Samantha'))\n        ) || voices[0];\n        if (preferredVoice) {\n          utterance.voice = preferredVoice;\n        }\n      };\n\n      if (window.speechSynthesis.getVoices().length > 0) {\n        setVoice();\n      } else {\n        window.speechSynthesis.onvoiceschanged = setVoice;\n      }\n      \n      utterance.onstart = () => {\n        setIsSpeaking(true);\n      };\n      \n      // STEP 3: When TTS finishes, start thinking timer\n      utterance.onend = () => {\n        setIsSpeaking(false);\n        startThinkingTimer();\n      };\n      \n      utterance.onerror = (e) => {\n        console.error('Speech error:', e);\n        setIsSpeaking(false);\n        startThinkingTimer();\n      };\n      \n      utteranceRef.current = utterance;\n      window.speechSynthesis.speak(utterance);\n    } else {\n      // Browser doesn't support TTS - skip to thinking\n      console.warn('Speech synthesis not supported');\n      startThinkingTimer();\n    }\n  };\n\n  // STEP 3: 20-Second Thinking Timer\n  const startThinkingTimer = () => {\n    setIsThinking(true);\n    setThinkingTime(20);\n    \n    timerIntervalRef.current = setInterval(() => {\n      setThinkingTime((prev) => {\n        if (prev <= 1) {\n          clearInterval(timerIntervalRef.current);\n          // STEP 4: Auto-start recording when timer reaches 0\n          startRecording();\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n  };\n\n  // STEP 4: Automatically Start Audio Recording\n  const startRecording = () => {\n    setIsThinking(false);\n    setIsRecording(true);\n    setAudioLevel(0);\n    \n    if (!micStream) {\n      console.error('No microphone stream available');\n      return;\n    }\n    \n    audioChunksRef.current = [];\n    \n    try {\n      const mediaRecorder = new MediaRecorder(micStream, {\n        mimeType: 'audio/webm'\n      });\n      \n      mediaRecorder.ondataavailable = (event) => {\n        if (event.data.size > 0) {\n          audioChunksRef.current.push(event.data);\n        }\n      };\n      \n      mediaRecorder.onstop = async () => {\n        const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/webm' });\n        await submitAnswer(audioBlob);\n      };\n      \n      mediaRecorderRef.current = mediaRecorder;\n      mediaRecorder.start(100);\n    } catch (err) {\n      console.error('Error starting recording:', err);\n      setIsRecording(false);\n    }\n  };\n\n  // STEP 5: Submit Answer (Stop Recording)\n  const handleSubmitAnswer = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      setIsRecording(false);\n      setAudioLevel(0);\n    }\n  };\n\n  // Submit audio to backend (transcribe with Whisper)\n  const submitAnswer = async (audioBlob) => {\n    try {\n      // For now, use a placeholder text since we need Whisper integration\n      // In production, you'd send the audio to backend for transcription\n      \n      // Convert blob to base64 for demonstration\n      const reader = new FileReader();\n      reader.readAsDataURL(audioBlob);\n      reader.onloadend = async () => {\n        const base64Audio = reader.result;\n        \n        // TODO: Send to backend for Whisper transcription\n        // For now, send a placeholder\n        const placeholderText = `[Audio answer recorded - ${audioBlob.size} bytes]`;\n        \n        try {\n          if (isConnected) {\n            sendAnswer(placeholderText);\n          } else {\n            await sendMessage(sessionId, placeholderText);\n          }\n        } catch (err) {\n          console.error('Error submitting answer:', err);\n        }\n      };\n    } catch (err) {\n      console.error('Error processing audio:', err);\n    }\n  };\n\n  // Cleanup\n  useEffect(() => {\n    return () => {\n      if (timerIntervalRef.current) {\n        clearInterval(timerIntervalRef.current);\n      }\n      if (utteranceRef.current) {\n        window.speechSynthesis.cancel();\n      }\n    };\n  }, []);\n\n  // Format timer display\n  const formatTime = (seconds) => {\n    return `00:${seconds.toString().padStart(2, '0')}`;\n  };\n\n  return (\n    <div className=\"h-screen flex flex-col bg-stone-50\">\n      {/* Header */}\n      <div className=\"bg-amber-50 border-b border-amber-200 px-6 py-4 shadow-sm\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-slate-800\">\n              AI Audio Interview\n            </h1>\n            <p className=\"text-sm text-slate-600\">\n              Listen carefully and answer after the timer\n            </p>\n          </div>\n          <div className=\"flex items-center gap-4\">\n            <div className=\"text-right\">\n              <p className=\"text-xs text-slate-600\">Question</p>\n              <p className=\"text-lg font-bold text-slate-800\">{questionNumber}</p>\n            </div>\n            <button\n              onClick={() => navigate('/')}\n              className=\"px-4 py-2 bg-slate-700 hover:bg-slate-800 text-white rounded-lg flex items-center gap-2 transition-colors\"\n            >\n              <Home className=\"h-4 w-4\" />\n              Exit\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex items-center justify-center p-8 overflow-y-auto\">\n        <div className=\"max-w-4xl w-full\">\n          \n          {/* Question Display */}\n          <div className=\"bg-white rounded-xl shadow-lg border-2 border-stone-200 p-8 mb-8\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              {isSpeaking && (\n                <Volume2 className=\"h-6 w-6 text-blue-600 animate-pulse\" />\n              )}\n              <h2 className=\"text-2xl font-bold text-slate-800\">\n                Question {questionNumber}\n              </h2>\n            </div>\n            \n            <p className=\"text-xl text-slate-700 leading-relaxed mb-4\">\n              {currentQuestion || 'Loading question...'}\n            </p>\n            \n            {isSpeaking && (\n              <div className=\"flex items-center gap-2 text-blue-600 bg-blue-50 px-4 py-2 rounded-lg\">\n                <Volume2 className=\"h-5 w-5 animate-pulse\" />\n                <span className=\"text-sm font-medium\">Reading question aloud...</span>\n              </div>\n            )}\n          </div>\n\n          {/* Thinking Timer */}\n          {isThinking && (\n            <div className=\"bg-amber-50 border-2 border-amber-300 rounded-xl p-8 mb-8 text-center animate-fade-in\">\n              <div className=\"flex items-center justify-center gap-3 mb-4\">\n                <Brain className=\"h-8 w-8 text-amber-700\" />\n                <h3 className=\"text-2xl font-semibold text-amber-900\">\n                  Time to Think\n                </h3>\n              </div>\n              \n              <div className=\"text-7xl font-bold text-amber-700 mb-3 tabular-nums\">\n                {formatTime(thinkingTime)}\n              </div>\n              \n              <p className=\"text-lg text-amber-800 mb-4\">\n                Prepare your answer. Recording will start automatically.\n              </p>\n              \n              {/* Visual countdown progress */}\n              <div className=\"w-full h-4 bg-amber-200 rounded-full overflow-hidden shadow-inner\">\n                <div\n                  className=\"h-full bg-gradient-to-r from-amber-600 to-amber-500 transition-all duration-1000 ease-linear\"\n                  style={{ width: `${(thinkingTime / 20) * 100}%` }}\n                />\n              </div>\n            </div>\n          )}\n\n          {/* Recording Indicator */}\n          {isRecording && (\n            <div className=\"bg-red-50 border-2 border-red-300 rounded-xl p-8 text-center animate-fade-in\">\n              <div className=\"flex items-center justify-center gap-3 mb-6\">\n                <div className=\"relative\">\n                  <div className=\"h-6 w-6 bg-red-600 rounded-full animate-pulse\" />\n                  <div className=\"absolute inset-0 h-6 w-6 bg-red-600 rounded-full animate-ping opacity-75\" />\n                </div>\n                <h3 className=\"text-2xl font-semibold text-red-900\">\n                  Recording Your Answer\n                </h3>\n              </div>\n              \n              {/* Audio Level Indicator */}\n              <div className=\"mb-6\">\n                <div className=\"w-full h-6 bg-red-200 rounded-full overflow-hidden\">\n                  <div\n                    className=\"h-full bg-gradient-to-r from-red-500 to-red-600 transition-all duration-100\"\n                    style={{ width: `${audioLevel}%` }}\n                  />\n                </div>\n                <p className=\"text-xs text-red-700 mt-1\">Audio Level: {Math.round(audioLevel)}%</p>\n              </div>\n              \n              <p className=\"text-lg text-red-800 mb-6\">\n                Speak clearly into your microphone. Click \"Submit Answer\" when you're done.\n              </p>\n              \n              <button\n                onClick={handleSubmitAnswer}\n                className=\"px-8 py-4 bg-slate-700 hover:bg-slate-800 text-white text-lg font-semibold rounded-lg flex items-center gap-3 mx-auto transition-all hover:scale-105 shadow-lg\"\n              >\n                <Send className=\"h-6 w-6\" />\n                Submit Answer\n              </button>\n            </div>\n          )}\n\n          {/* Waiting State */}\n          {!isSpeaking && !isThinking && !isRecording && (\n            <div className=\"bg-blue-50 border-2 border-blue-200 rounded-xl p-8 text-center\">\n              <Clock className=\"h-12 w-12 text-blue-600 mx-auto mb-4 animate-pulse\" />\n              <p className=\"text-lg text-blue-800\">\n                Please wait while the question is being read...\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Camera Feed (Small corner) */}\n      <div className=\"fixed bottom-6 right-6 w-48 h-36 bg-slate-900 rounded-lg overflow-hidden shadow-2xl border-2 border-amber-300\">\n        <video\n          ref={(el) => {\n            if (el && cameraStream) {\n              el.srcObject = cameraStream;\n            }\n          }}\n          autoPlay\n          playsInline\n          muted\n          className=\"w-full h-full object-cover\"\n        />\n        <div className=\"absolute top-2 left-2 px-2 py-1 bg-black/50 rounded text-white text-xs\">\n          You\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AudioInterviewPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}